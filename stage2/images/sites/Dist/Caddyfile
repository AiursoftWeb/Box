{
	log {
		format json
		output file /data/caddy/logs/web.log {
			roll_size 1gb
			roll_uncompressed
		}
		level debug
	}
	servers :443 {
		listener_wrappers {
			proxy_protocol {
				timeout 2s
				allow 10.0.0.0/8
			}
			http_redirect
			tls
		}
	}
}

(hsts) {
	header Strict-Transport-Security max-age=63072000
}

(rate_limit) {
	rate_limit {
		zone ip_limit {
			key    {remote_host}
			events 8000
			window 600s
		}
		log_key
	}
}

(rate_limit_api) {
	rate_limit {
		zone ip_limit_api {
			key    {remote_host}
			events 13000
			window 600s
		}
		log_key
	}
}




# Untrusted
flyclass.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://flyclass_app:5000 {

    }
}




# Untrusted.
template.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://template_app:5000 {
    }
}

template.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://template.aiursoft.com{uri} permanent
}

template-docs.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://template_docs:5000 {
    }
}





immortalwrt.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip

    respond /robots.txt 200 {
            body "User-agent: *
Disallow: /"
    }

    reverse_proxy http://immortalwrt_web_immortal:5000 {
    }
}





gist.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://gist_app:6157 {
    }
}




# Not Trusted
anduinos-nightly-builds.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://192.168.50.115:48466 {
    }
}




# Untrusted.
mc.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://minecraft_server:8123 {
    }
}




ui.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://aiurui_app:5000 {
    }
}

stack.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://aiurui_stack:5000 {
    }
}




stathub.aiursoft.com {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://stathub_stathubserver:5000 {
    }
}




# Untrusted
chess.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://chess_app:5000 {
    }
}




# Untrusted.
wiki.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    respond /robots.txt 200 {
            body "User-agent: *
Disallow: /"
    }

    reverse_proxy http://kiwix_app:8080 {

    }
}




marktohtml.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://mark_to_html_app:5000 {
    }
}

marktohtml.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://marktohtml.aiursoft.com{uri} permanent
}



# Protected by 2FA.
gitlab.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    @hacker {
        not remote_ip 192.168.50.0/24 172.18.0.0/16
        path /admin*
    }

    handle @hacker {
        header Content-Type text/html
        respond "<h1>You are not the admin! Don't try to admin my GitLab server :)</h1>" 401
    }
    reverse_proxy http://gitlab_gitlab {
    }
}




# Untrusted.
vault.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://vaultwarden_app:80 {
    }
}




# Untrusted.
cook.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://howtocook_app:80 {
    }
}




# Protected by Authentik
media.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jellyfin_web:8096 {
    }
}




# Untrusted.
http://tracer.aiursoft.cn, https://tracer.aiursoft.cn {
    log
    import rate_limit_api

    reverse_proxy http://tracer_app:5000 {
    }
}




# Untrusted.
memos.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://memos_memos:5230 {
    }
}




uptime.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip

    route {
        reverse_proxy /outpost.goauthentik.io/* http://uptimekuma_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://uptimekuma_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://uptimekuma_server:3001 {
        }
    }
}




# JS Games
www.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://homepage_app:5000 {
    }
}

# JS Games
aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://www.aiursoft.cn/ permanent
}




# Now we have koel_koel:80
# And we have koel_authentik_proxy:9000

# Protected by Authentik
musics.aiursoft.cn {
    log
    import hsts
    import rate_limit
    header -content-security-policy
    header -x-frame-options
    encode br gzip

    #Use Authentik for forward auth
    route {
        reverse_proxy /manifest.json http://koel_koel:80

        reverse_proxy /outpost.goauthentik.io/* http://koel_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://koel_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://koel_koel:80
    }
}




cpprunner.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://cpprunner_app:5000 {
    }
}




clickhouse.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    
    route {
        reverse_proxy /outpost.goauthentik.io/* http://clickhouse_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://clickhouse_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://clickhouse_clickhouse:8123
    }
}



# Untrusted.
nuget.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://nuget_app:5000 {
    }
}




# Not Trusted
chat.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    @insider {
            remote_ip 192.168.50.0/24 172.18.0.0/16
    }
    handle @insider {
        reverse_proxy http://ai_ollama-gateway:5000 {
        }
    }

    route {
        reverse_proxy /outpost.goauthentik.io/* http://ai_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://ai_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://ai_ollama-gateway:5000
    }
}

# Untrusted
openweb.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://ai_open-webui:8080
}





seelies.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://seelies_app:8000 {
    }
}




# Untrusted.
immich.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    @head_root {
        method HEAD
        path /
    }

    handle @head_root {
        respond "" 200
    }
    reverse_proxy http://immich_immich-server:2283 {
    }
}




# Fissssssh
fissssssh.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://fissssssh_app:5000 {
    }
}




# EdgeNeko
edgeneko.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://edgeneko_blog_app:5000 {
    }
}

edgeneko.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://edgeneko.aiursoft.com{uri} permanent
}

edgeneko-comment.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://edgeneko_blog_comments:23366 {
    }
}

edgeneko-comment.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://edgeneko-comment.aiursoft.com{uri} permanent
}



# Protected by Authentik
charter.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    # Use Authentik for forward auth
    route {
        reverse_proxy /outpost.goauthentik.io/* http://charter_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://charter_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://charter_app:5000
    }
}




# JS Games
drive.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://aiurdrive_app:5000 {
    }
}




translate.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://lingva_web:3000 {
    }
}




# Aimer
aimer.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://aimer_app:5000 {
    }
}




# Neko Image Gallery
sakuratrak-qdrant.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip

    route {
        reverse_proxy /outpost.goauthentik.io/* http://neko_image_gallery_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://neko_image_gallery_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
        }

        reverse_proxy http://neko_image_gallery_qdrant_database:6333 {
        }
    }
}

sakuratrak.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    # Disable it's service worker at /sw.js because it will cause the app to not work properly.
    handle_path /sw.js {
        header Content-Type text/javascript
        respond "console.log('Service worker is disabled.');" 200
    }

    route {
        reverse_proxy /outpost.goauthentik.io/* http://neko_image_gallery_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://neko_image_gallery_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
        }

        handle_path /api/* {
            reverse_proxy http://neko_image_gallery_server:8000 {
            }
        }

        handle {
            reverse_proxy http://neko_image_gallery_webapp:5000 {
            }
        }
    }
}





# Untrusted.
books.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    @hacker {
        not remote_ip 192.168.50.0/24 172.18.0.0/16
        path /admin*
    }

    handle @hacker {
        header Content-Type text/html
        respond "<h1>You are not the admin! Don't try to hack my server :)</h1>" 401
    }
    header -content-security-policy
    header -x-frame-options
    reverse_proxy http://kavita_web:5000 {
    }
}




remotely.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    @hacker {
        not remote_ip 192.168.50.0/24 172.18.0.0/16
        path /Account/Login*
    }
    handle @hacker {
        header Content-Type text/html
        respond "<h1>You are not the remotely admin! Don't try to hack my remotely :)</h1>" 401
    }

    reverse_proxy http://remotely_app:5000 {
    }
}




kahla.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://kahla_app:5000 {
    }
}




# Protected by IP.

videos.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://peertube_peertube:9000 {
    }
}




# Untrusted.
manhours.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://manhours_app:5000 {
    }
}





# Not Trusted
files.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    route {
        reverse_proxy /outpost.goauthentik.io/* http://fileshare_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://fileshare_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://fileshare_mediabrowser
    }
}




# Protected by IP.

pub.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://pubshare_web:5000 {
    }
}




# Protected by IP.
vpn.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip

    respond / 200 {
        body "This is a VPN service for internal datacenter maintenance, not for public access nor illegal activities."
    }

    reverse_proxy /admin http://gateway_vpn:10000 {
    }
}




# Untrusted
auth.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://authentik_server:9000 {
    }
}

# Untrusted
auth.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://authentik_server:9000 {
    }
}




# Untrusted
health.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://health_sleepagent:5000 {
    }
}

grafana.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://health_grafana:3000 {
    }
}




todo.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://vikunja_app:3456 {
    }
}




http://mirror.aiursoft.cn, https://mirror.aiursoft.cn {
    log
    # import hsts
    import rate_limit_api
    encode br gzip

    respond /robots.txt 200 {
            body "User-agent: *
Disallow: /"
    }

    reverse_proxy http://exp_apt_mirror_web_apt:5000 {
    }
}

http://mirror-ppa.aiursoft.cn, https://mirror-ppa.aiursoft.cn {
    log
    # import hsts
    import rate_limit_api
    encode br gzip

    respond /robots.txt 200 {
            body "User-agent: *
Disallow: /"
    }

    reverse_proxy http://exp_apt_mirror_web_ppa:5000 {
    }
}




hub.aiursoft.com {
    log
    import hsts
    encode br gzip
    
    # Please note:
    # Docker push currently fails when anonymous pull is enabled,
    # due to a known issue in Zot (see https://github.com/project-zot/zot/issues/2928) :contentReference[oaicite:0]{index=0}
    # There is no permanent fix yet. As a temporary workaround, use:
    #   docker save ${CI_PROJECT_NAMESPACE}/$CI_PROJECT_NAME:$TAG -o temp.tar :contentReference[oaicite:1]{index=1}
    #   regctl image import hub.aiursoft.com/${CI_PROJECT_NAMESPACE}/$CI_PROJECT_NAME:$TAG temp.tar :contentReference[oaicite:2]{index=2}
    #   rm temp.tar
    reverse_proxy http://zot_server:5000 {
    }
}

hub.aiursoft.com {
    log
    import hsts
    encode br gzip
    
    # Please note:
    # Docker push currently fails when anonymous pull is enabled,
    # due to a known issue in Zot (see https://github.com/project-zot/zot/issues/2928) :contentReference[oaicite:0]{index=0}
    # There is no permanent fix yet. As a temporary workaround, use:
    #   docker save ${CI_PROJECT_NAMESPACE}/$CI_PROJECT_NAME:$TAG -o temp.tar :contentReference[oaicite:1]{index=1}
    #   regctl image import hub.aiursoft.com/${CI_PROJECT_NAMESPACE}/$CI_PROJECT_NAME:$TAG temp.tar :contentReference[oaicite:2]{index=2}
    #   rm temp.tar
    reverse_proxy http://zot_server:5000 {
    }
}




# Protected by 2FA.
nextcloud.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://nextcloud_web {
    }

    redir /.well-known/carddav /remote.php/dav 301
    redir /.well-known/caldav /remote.php/dav 301
    redir /.well-known/webfinger /index.php/.well-known/webfinger 301
    redir /.well-known/nodeinfo /index.php/.well-known/nodeinfo 301
}

talk.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://nextcloud_aio:8081 {
    }
}



# Not Trusted
lab.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip

    route {
        reverse_proxy /outpost.goauthentik.io/* http://lab_authentik_proxy:9000 {
            header_up Host {http.reverse_proxy.upstream.host}
        }

        forward_auth http://lab_authentik_proxy:9000 {
            uri     /outpost.goauthentik.io/auth/caddy
            copy_headers X-Authentik-Username X-Authentik-Groups X-Authentik-Entitlements X-Authentik-Email X-Authentik-Name X-Authentik-Uid X-Authentik-Jwt X-Authentik-Meta-Jwks X-Authentik-Meta-Outpost X-Authentik-Meta-Provider X-Authentik-Meta-App X-Authentik-Meta-Version
        }

        reverse_proxy http://lab_app:7681
    }
}





jimmoen.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_jimmoen:5000 {
        }
}

jimmoen.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://jimmoen.aiursoft.com{uri} permanent
}

rest.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_rest:5000 {
        }
}

rest.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://rest.aiursoft.com{uri} permanent
}

anduin.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_anduin:5000 {
        }
}

anduin.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://anduin.aiursoft.com{uri} permanent
}

cody.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_cody:5000 {
        }
}

cody.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://cody.aiursoft.com{uri} permanent
}

gxhao.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_gxhao:5000 {
        }
}

gxhao.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://gxhao.aiursoft.com{uri} permanent
}

anois.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_anois:5000 {
        }
}

anois.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://anois.aiursoft.com{uri} permanent
}

dvorak.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_dvorak:5000 {
        }
}

dvorak.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://dvorak.aiursoft.com{uri} permanent
}

kitlau.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_kitlau:5000 {
        }
}

kitlau.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://kitlau.aiursoft.com{uri} permanent
}

xinboo.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_xinboo:5000 {
        }
}

xinboo.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://xinboo.aiursoft.com{uri} permanent
}

gbiner.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_gbiner:5000 {
        }
}

gbiner.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://gbiner.aiursoft.com{uri} permanent
}

rdf.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_rdf:5000 {
        }
}

rdf.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://rdf.aiursoft.com{uri} permanent
}

lyx.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_lyx:5000 {
        }
}

lyx.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://lyx.aiursoft.com{uri} permanent
}

shubuzuo.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_shubuzuo:5000 {
        }
}

shubuzuo.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://shubuzuo.aiursoft.com{uri} permanent
}

lily.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_lily:5000 {
        }
}

lily.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://lily.aiursoft.com{uri} permanent
}

carson.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_carson:5000 {
        }
}

carson.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://carson.aiursoft.com{uri} permanent
}

zoneblog.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_zoneblog:5000 {
        }
}

zoneblog.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://zoneblog.aiursoft.com{uri} permanent
}

yuyuyuyublog.aiursoft.com {
        log
        import hsts
    import rate_limit
        encode br gzip
        reverse_proxy http://moongladepure_yuyuyuyublog:5000 {
        }
}

yuyuyuyublog.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://yuyuyuyublog.aiursoft.com{uri} permanent
}




# Untrusted.
tts.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://reporter_tts:8000 {
    }
}

# Untrusted.
reporter.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://reporter_portal:5000 {
    }
}




musictools.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip

    reverse_proxy http://musictools_app:5000 {
    }
}




# Protected by 2FA.
git.aiursoft.cn {
    log
    import hsts
    import rate_limit
    respond /robots.txt 200 {
            body "User-agent: *
Disallow: /"
    }

    header -x-frame-options
    encode br gzip
    reverse_proxy http://gitea_app:3000 {

    }
}




# JS Games
gameoflife.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_gameoflife:5000 {
    }
}

2048.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_game2048:5000 {
    }
}

hextris.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_hextris:5000 {
    }
}

cat.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_cat:5000 {
    }
}

three.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_three:5000 {
    }
}

life.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_life:5000 {
    }
}

miku.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_miku {
    }
}

minesweeper.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_minesweeper:5000 {
    }
}

oi.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_oi:5000 {
    }
}

ctf.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://jsgames_ctf {
    }
}

ip.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://ipcalc:5000 {
    }
}

pianonote.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    redir https://musictools.aiursoft.com{uri} permanent
}



# Untrusted.
npm.aiursoft.cn {
    log
    import hsts
    import rate_limit_api
    encode br gzip
    reverse_proxy http://npm_npm:4873 {
    }
}




www.aiursoft.com {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://corp-home_corp-home:5000 {
    }
}




http://test.aiursoft.com {
    log
    import rate_limit
    encode br gzip
    header Content-Type text/html
    respond "<h1>This is a test server</h1>" 200 {
    }
}



# JS Games
gitmirror.aiursoft.cn {
    log
    import hsts
    import rate_limit
    encode br gzip
    reverse_proxy http://gitmirror_app:5000 {
    }
}





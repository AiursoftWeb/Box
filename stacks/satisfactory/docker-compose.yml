# docker pull hub.aiursoft.cn/passivelemon/terraria-docker:latest

version: '3.9'

services:
  server:
    image: hub.aiursoft.cn/wolveix/satisfactory-server:latest
    volumes:
      - satisfactory:/config
    environment:
      - MAXPLAYERS=8
      - PGID=1000
      - PUID=1000
      - STEAMBETA=false
    networks:
      - frp_net
    ports:
      # These ports are for internal use. For external, FRP will handle it.
      - target: 7777
        published: 7777
        protocol: tcp
        mode: host
      - target: 8888
        published: 8888
        protocol: tcp
        mode: host
      - target: 7777
        published: 7777
        protocol: udp
        mode: host
    stop_grace_period: 60s
    deploy:
      resources:
        limits:
          cpus: '8'
          memory: 16G
      update_config:
        order: stop-first
        delay: 60s

volumes:
  satisfactory:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: /swarm-vol/satisfactory

networks:
  frp_net:
    external: true
